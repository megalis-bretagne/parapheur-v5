#
# i-Parapheur
# Copyright (C) 2019-2022 Libriciel-SCOP
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as
# published by the Free Software Foundation, either version 3 of the
# License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.
#



services:


  ipng-business:
    image: registry.libriciel.fr:443/public/signature/ipng:1.0.0-beta01
    extra_hosts:
      - "host.docker.internal:host-gateway"
      - "iparapheur.dom.local:host-gateway"
    ports:
      - 8081:8081
    volumes:
      - ./data/ipng/wallet:/wallet
      - ./data/ipng/ca-certs:/crypto-config
      - ./src/main/resources/ipng/application-dev.properties:/application.properties
      - ./data/ipng/connection-profile.yml:/connection-profile.yml
    restart: unless-stopped
    networks:
      - ipng

  mongo:
    image: mongo:4.2.18-bionic
    ports:
      - 27017:27017
    networks:
      - ipng


  nginx:
    networks:
      - ipng
      - default

  core:
    volumes:
      - ./src/main/resources/core/application-dev-ipng.yml:/application.yml
    networks:
      - ipng
      - default

  keycloak:
    networks:
      - ipng
      - default

  redis:
    networks:
      - ipng
      - default


networks:
  ipng:
    external: true
    name: ipng_ipng
