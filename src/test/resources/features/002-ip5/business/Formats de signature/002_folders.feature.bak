@business @ip5 @formats-de-signature @folder @ignore
Feature: Création de dossiers pour le paramétrage métier "Formats de signature"

    Scenario Outline: Create ${count} "${subtype}" draft folders ${withOrWithout} annex
        * def params =
"""
{
    tenant: 'Formats de signature',
    desktop: 'WebService',
    type: '<type>',
    subtype: '<subtype>',
    mainFile: <mainFile>,
    nameTemplate: '<nameTemplate>',
    annotation: '<annotation>',
    username: '<username>',
}
"""
        * ip5.api.v1.auth.login('user', 'password')
        * def folders = ip5.api.v1.desk.draft.getPayloadMonodoc(params, <count>, <extra>, <start>)
        * ip5.api.v1.auth.login('ws-fds', 'Ilenfautpeupouretreheureux')
        * def result = call read('classpath:lib/ip5/api/draft/create-and-send-monodoc-<withOrWithout>-annex.feature') folders

        Examples:
            | type               | subtype        | mainFile!                                                                                                                                    | nameTemplate                                                         | start! | count! | withOrWithout | extra! | annotation                          |
            | Automatique        | Signature      | 'classpath:files/formats/document_rtf/document_rtf.rtf',                                                                                     | Automatique - Signature - RTF                                        | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | {'file': 'classpath:files/formats/document_rtf/document_rtf.rtf', 'detached': 'classpath:files/formats/document_rtf/signature_cades.p7s'}    | Automatique - Signature - RTF - signe_cades                          | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | {'file': 'classpath:files/formats/document_rtf/document_rtf.rtf', 'detached': 'classpath:files/formats/document_rtf/signature_xades.xml'}    | Automatique - Signature - RTF - signe_xades                          | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | Automatique - Signature - PDF_sans_tags                              | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | Automatique - Signature - PDF_sans_tags - repositionnement signature | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | {'file': 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf', 'detached': 'classpath:files/formats/PDF_sans_tags/signature_cades.p7s'} | Automatique - Signature - PDF_sans_tags - signe_cades                | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags-signature_pades.pdf',                                                                   | Automatique - Signature - PDF_sans_tags - signe_pades                | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | {'file': 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf', 'detached': 'classpath:files/formats/PDF_sans_tags/signature_xades.xml'} | Automatique - Signature - PDF_sans_tags - signe_xades                | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | Automatique - Signature - PDF_avec_tags                              | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | Automatique - Signature - PDF_avec_tags - repositionnement signature | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | {'file': 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf', 'detached': 'classpath:files/formats/PDF_avec_tags/signature_cades.p7s'} | Automatique - Signature - PDF_avec_tags - signe_cades                | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags-signature_pades.pdf',                                                                   | Automatique - Signature - PDF_avec_tags - signe_pades                | 1      | 1      | without       | {}     | démarrage |
            | Automatique        | Signature      | {'file': 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf', 'detached': 'classpath:files/formats/PDF_avec_tags/signature_xades.xml'} | Automatique - Signature - PDF_avec_tags - signe_xades                | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | 'classpath:files/formats/document_rtf/document_rtf.rtf',                                                                                     | CAdES - Signature - RTF                                              | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | {'file': 'classpath:files/formats/document_rtf/document_rtf.rtf', 'detached': 'classpath:files/formats/document_rtf/signature_cades.p7s'}    | CAdES - Signature - RTF - signe_cades                                | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | {'file': 'classpath:files/formats/document_rtf/document_rtf.rtf', 'detached': 'classpath:files/formats/document_rtf/signature_xades.xml'}    | CAdES - Signature - RTF - signe_xades                                | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | CAdES - Signature - PDF_sans_tags                                    | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | {'file': 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf', 'detached': 'classpath:files/formats/PDF_sans_tags/signature_cades.p7s'} | CAdES - Signature - PDF_sans_tags - signe_cades                      | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | {'file': 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf', 'detached': 'classpath:files/formats/PDF_sans_tags/signature_xades.xml'} | CAdES - Signature - PDF_sans_tags - signe_xades                      | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | CAdES - Signature - PDF_avec_tags                                    | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | {'file': 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf', 'detached': 'classpath:files/formats/PDF_avec_tags/signature_cades.p7s'} | CAdES - Signature - PDF_avec_tags - signe_cades                      | 1      | 1      | without       | {}     | démarrage |
            | CAdES              | Signature      | {'file': 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf', 'detached': 'classpath:files/formats/PDF_avec_tags/signature_xades.xml'} | CAdES - Signature - PDF_avec_tags - signe_xades                      | 1      | 1      | without       | {}     | démarrage |
            | HELIOS - XAdES env | Signature      | 'classpath:files/formats/PESALR1_unsigned.xml'                                                                                               | HELIOS - XAdES env - Signature - XML (UTF-8)                         | 1      | 1      | without       | {}     | démarrage |
            | HELIOS - XAdES env | Signature      | 'classpath:files/formats/pesWithASAP_unsigned.xml'                                                                                           | HELIOS - XAdES env - Signature - XML (ISO-8859-1, PJ PDF incluses)   | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Cachet serveur | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | PAdES - Cachet serveur - PDF_sans_tags                               | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Cachet serveur | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | PAdES - Cachet serveur - PDF_sans_tags - repositionnement signature  | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Cachet serveur | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | PAdES - Cachet serveur - PDF_avec_tags                               | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Cachet serveur | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | PAdES - Cachet serveur - PDF_avec_tags - repositionnement signature  | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | PAdES - Signature - PDF_sans_tags                                    | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | PAdES - Signature - PDF_sans_tags - repositionnement signature       | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | PAdES - Signature - PDF_avec_tags                                    | 1      | 1      | without       | {}     | démarrage |
            | PAdES              | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | PAdES - Signature - PDF_avec_tags - repositionnement signature       | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | 'classpath:files/formats/document_rtf/document_rtf.rtf',                                                                                     | XAdES det - Signature - RTF                                          | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | {'file': 'classpath:files/formats/document_rtf/document_rtf.rtf', 'detached': 'classpath:files/formats/document_rtf/signature_cades.p7s'}    | XAdES det - Signature - RTF - signe_cades                            | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | {'file': 'classpath:files/formats/document_rtf/document_rtf.rtf', 'detached': 'classpath:files/formats/document_rtf/signature_xades.xml'}    | XAdES det - Signature - RTF - signe_xades                            | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf',                                                                                   | XAdES det - Signature - PDF_sans_tags                                | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | {'file': 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf', 'detached': 'classpath:files/formats/PDF_sans_tags/signature_cades.p7s'} | XAdES det - Signature - PDF_sans_tags - signe_cades                  | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | {'file': 'classpath:files/formats/PDF_sans_tags/PDF_sans_tags.pdf', 'detached': 'classpath:files/formats/PDF_sans_tags/signature_xades.xml'} | XAdES det - Signature - PDF_sans_tags - signe_xades                  | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf',                                                                                   | XAdES det - Signature - PDF_avec_tags                                | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | {'file': 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf', 'detached': 'classpath:files/formats/PDF_avec_tags/signature_cades.p7s'} | XAdES det - Signature - PDF_avec_tags - signe_cades                  | 1      | 1      | without       | {}     | démarrage |
            | XAdES det          | Signature      | {'file': 'classpath:files/formats/PDF_avec_tags/PDF_avec_tags.pdf', 'detached': 'classpath:files/formats/PDF_avec_tags/signature_xades.xml'} | XAdES det - Signature - PDF_avec_tags - signe_xades                  | 1      | 1      | without       | {}     | démarrage |
